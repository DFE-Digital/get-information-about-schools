@using Edubase.Web.UI.Models.Search;
@using eStatus = Edubase.Services.Enums.eLookupEstablishmentStatus;
@using VM = Edubase.Web.UI.Models.Search.SearchViewModel;
@using Edubase.Web.UI.Helpers;
@model VM
    
@{
    ViewBag.bodyClasses = "schools-search-page search-page";
    ViewBag.hideLogo = true;
}

<div class="grid-row">
    <div class="column-full">
        @{ Html.RenderPartial("Partials/_SearchHeader"); }
    </div>
    <div class="column-full">
        <div class="horizontal-tabs-wrapper">
            <div class="tab-wrap">
                <ul class="horizontal-tabs">
                    <li>
                        <a href="/?SelectedTab=Establishments" class="horizontal-tab estab @((Model.SelectedTab == SearchViewModel.Tab.Establishments) ? "selected-tab" : "" )">
                            Find an establishment
                        </a>
                    </li>
                    <li>
                        <a href="/?SelectedTab=Groups" class="horizontal-tab group @((Model.SelectedTab == SearchViewModel.Tab.Groups) ? "selected-tab" : "" )">
                            Find an establishment group
                        </a>
                    </li>
                    <li>
                        <a href="/?SelectedTab=Governors" class="horizontal-tab governors @((Model.SelectedTab == SearchViewModel.Tab.Governors) ? "selected-tab" : "" )">Find a governor</a>
                    </li>
                </ul>
            </div>

            <div class="tab-content-wrapper horizontal-tabs-content">
                <div id="establishments" class="tab-content @((Model.SelectedTab != SearchViewModel.Tab.Establishments) ? "hidden-tab-content" : "")" aria-hidden="@(Model.SelectedTab != SearchViewModel.Tab.Establishments)">

                    @{ Html.RenderPartial("Partials/_EstablishmentSearch"); }

                </div>

                <div id="groups" class="tab-content @((Model.SelectedTab != SearchViewModel.Tab.Groups) ? "hidden-tab-content" : "")" aria-hidden="@(Model.SelectedTab != SearchViewModel.Tab.Groups)">
                    @{ Html.RenderPartial("Partials/_GroupSearch"); }
                   
                </div>

                <div id="governors" class="tab-content @((Model.SelectedTab != SearchViewModel.Tab.Governors) ? "hidden-tab-content" : "")" aria-hidden="@(Model.SelectedTab != SearchViewModel.Tab.Governors)">
                    @{ Html.RenderPartial("Partials/_GovernorSearch");}

                </div>
            </div>

        </div>
        @* Tool tip texts - Potential TODO add to resource file *@
    @if (User.Identity.IsAuthenticated || Model.SelectedTab != SearchViewModel.Tab.Governors)
    {
        Html.RenderPartial("Partials/_HelpText");
        
    }

    </div>

</div>

@section ViewScripts{
    <script src="/public/dfeagiledevops-typeahead/dist/typeahead.bundle.min.js"></script>
    <script type="text/javascript">
        var jScriptVersion;
        window.localAuthorities = @Html.Json(Model.LocalAuthorities);
        /*@@cc_on
        // only IE <= 10 enter this block
            jScriptVersion = @@_jscript_version;
        @@*/
        if (typeof jScriptVersion === 'undefined' || jScriptVersion >= 9) {
            window.setTimeout(function() {
                var s = document.createElement("script");
                s.src = "https://maps.googleapis.com/maps/api/js?libraries=places&callback=DfE.Views.GoogleLocationViewModel.Load&key=AIzaSyC5YvjNVqceizjjEi95rzhCCjwsCVrb8Gw";
                document.getElementsByTagName('body')[0].appendChild(s);
            },0);

        }
    </script>
   
}

