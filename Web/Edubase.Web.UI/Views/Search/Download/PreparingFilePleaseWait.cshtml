@model SearchDownloadGenerationProgressViewModel
@{
    ViewBag.bodyClasses = "schools-search-page search-page";
    ViewBag.hideLogo = true;
    var step = (Model.SearchCollection == AdvancedSearchViewModel.eSearchCollection.Establishments) ? "3" : "2";
}

@section Head {
    <meta http-equiv="refresh" content="2">
}

<div class="grid-row">
    <div class="column-full">
        <h1 class="heading-xlarge">Download data</h1>
    </div>
    <div class="horizontal-tabs-wrapper">        
        <div class="column-full">
            
            <h2 class="bold-medium">Download 
            
            @Model.GetDownloadName()
             search results</h2>
            <p>@step of @Model.GetTotalSteps()</p>
            <h2 class="font-medium">Preparing your requested data. Large files may take some time to download.</h2>
            <p>
                <!-- todo: Jon; pls do some magic here thanks -->
                SPINNER HERE
            </p>
            <br />
            <p>
                Status: @Model.Progress.Status<br />
                Percentage completed: @Model.Progress.PercentageComplete <br />
                @Model.Progress.ProcessedCount of @Model.Progress.TotalRecordsCount processed.<br /><br />
                @if (Model.Progress.HasErrored)
                {
                    <br />
                    <p>Error occurred</p>
                    
                }
            </p>

        </div>
    </div>
</div>

