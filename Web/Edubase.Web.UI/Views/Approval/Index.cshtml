@using Edubase.Services.Domain;
@model ApprovalDto
@{
    ViewBag.Title = "Approve changes";
    ViewBag.PageClass = "search-results";
    ViewBag.HideLogo = true;
}

<div class="grid-row">
    <div class="column-full">
        <h1 class="heading-xlarge">Items for approval</h1>
        <p>You have <span class="bold-large">@Model.Count</span> item@(Model.Count == 1 ? "":"s") that require@(Model.Count == 1 ? "s" : "") your approval
            @if(Model.EstablishmentName!= null)
            {
                <text>for the Establishment '<span class="bold-small">@Model.EstablishmentName</span>'</text>
            }
        </p>
    </div>

    <div class="column-full top-pagination">
        @Html.Partial("_ResultsPagination2", Model)
        <br />
    </div>

    <div class="column-full approval-data">

        <table class="approval-items">
            <thead>
                <tr>
                    <th>URN</th>
                    <th>Establishment name</th>
                    <th>Updated field</th>
                    <th>Old value</th>
                    <th>New value</th>
                    <th>Date changed</th>
                    <th>Suggested from</th>
                    <th colspan="2">Approve or Reject?</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Items)
                {
                    <tr>
                        <td>@Html.ActionLink(item.EstablishmentUrn.ToString(), "Details", "Schools", new { id = item.EstablishmentUrn }, null)</td>
                        <td>@Html.ActionLink(item.EstablishmentName, "Details", "Schools", new { id = item.EstablishmentUrn }, null)</td>
                        <td class="bb">@item.UpdatedFieldName</td>
                        <td>@item.OldValue</td>
                        <td>@item.NewValue</td>
                        <td>@item.DateOfChange</td>
                        <td class="bb">@item.OriginatorName</td>
                        <td>@Html.ActionLink("Accept", "Accept")</td>
                        <td>@Html.ActionLink("Reject", "Reject")</td>
                    </tr>
                }
            </tbody>
        </table>
        
        <ul class="school-results-listing approval-items">
            @foreach (var item in Model.Items)
            {
                <li>
                    <dl>
                        <dt>URN:</dt>
                        <dd>@Html.ActionLink(item.EstablishmentUrn.ToString(), "Details", "Schools", new { id = item.EstablishmentUrn }, null)</dd>
                        <dt>Establishment name:</dt>
                        <dd>@item.EstablishmentName</dd>
                        <dt>Updated field:</dt>
                        <dd>@item.UpdatedFieldName</dd>
                        <dt>Old value:</dt>
                        <dd>@item.OldValue</dd>
                        <dt>New value:</dt>
                        <dd>@item.NewValue</dd>
                        <dt>Date changed:</dt>
                        <dd>@item.DateOfChange</dd>
                        <dt>Suggested from:</dt>
                        <dd>@item.OldValue</dd>
                        <dt></dt>
                        <dd>@Html.ActionLink("Accept", "Accept")</dd>
                        <dt></dt>
                        <dd>@Html.ActionLink("Reject", "Reject")</dd>

                    </dl>
                </li>
            }
        </ul>
        
    </div>

    <div class="column-full lower-pagination">
        <br />
        @Html.Partial("_ResultsPagination2", Model)
    </div>
</div>
