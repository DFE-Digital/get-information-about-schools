@using Edubase.Services.Domain;
@model PagedResultDto
@{
    int startResult = @Model.Skip + 1;
    int endResult = (@Model.Skip + @Model.Take > @Model.Count) ? @Model.Count : @Model.Skip + @Model.Take;
    int currentPage = @Model.Skip / @Model.Take;
    int totalPages = @Model.Count / @Model.Take;
    String action = ViewContext.RouteData.Values["action"].ToString();
    int maxPages = 10;
    int paginationStart = 0;
    int paginationFinish = @Model.PageCount;
    
}

@if (Model.PageCount > maxPages)
{
    if (currentPage < 5)
    {
        paginationFinish = maxPages;
    }
    else if (currentPage + 5 > Model.PageCount)
    {
        paginationFinish = Model.PageCount;
        paginationStart = paginationFinish - maxPages;
    }
    else if (currentPage >= 5)
    {
        paginationFinish = currentPage + 5;
        paginationStart = paginationFinish - maxPages;
    }

}

@if (Model.Count > 0 && Model.PageCount > 1)
{

    <div class="pagination">
        <p>Showing @startResult - @endResult of @Model.Count</p>
        <ul class="pagination-links">
            @{
                if (currentPage > 0)
                {
                    <li>
                        @Html.ActionLink("Previous",
                     @action,
                     new { skip = ((currentPage - 1) * Model.Take) },
                     new { @class = "pagination-prev" })
                </li>
                }

                for (int i = paginationStart; i < paginationFinish; i++)
                {
                    var displayPage = i + 1;
                    if (i == currentPage)
                    {
                        <li><span class="go-nowhere numeric-pagination">@displayPage.ToString()</span></li>
                    }
                    else
                    {
                        <li>
                            @Html.ActionLink(displayPage.ToString(),
                        @action,
                        new { skip = (i * Model.Take) },
                        new { @class = "numeric-pagination" })
                    </li>
                    }
                }

                if (currentPage < Model.PageCount - 1)
                {
                    <li>
                        @Html.ActionLink("Next",
                    @action,
                    new { skip = ((currentPage + 1) * Model.Take) },
                    new { @class = "pagination-next" })
                </li>
                }
            }
        </ul>
    </div>
                }

