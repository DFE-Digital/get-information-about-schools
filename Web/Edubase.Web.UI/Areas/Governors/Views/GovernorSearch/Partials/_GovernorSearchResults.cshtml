@using Edubase.Common;
@model GovernorSearchViewModel

@if (Model.Error != null)
{
    <div class="column-two-thirds">
        <h2 class="heading-medium">Error</h2>

        <p>@Model.Error</p>
    </div>
}
else if (Model.Count > 0)
{
    if (Model.PageCount > 1)
    {
        <div class="column-two-thirds top-pagination">
            @Html.Partial("_GenericPagination")
        </div>
    }
    <div class="column-two-thirds">
        <ul class="school-results-listing">
            @foreach (var result in Model.Results)
                {
                <li>
                    <h2 class="bold-small">@result.GetFullName() &ndash; @(Model.GovernorRoles.FirstOrDefault(x => x.Id == result.RoleId)?.Name)</h2>
                    <dl>
                        @if (result.EstablishmentUrn.HasValue)
                        {
                            <dt><abbr title="Unique Reference Number">URN</abbr>:</dt>
                            <dd>@Html.ActionLink(result.EstablishmentUrn.ToString(), "Details", "Establishment", new { id = result.EstablishmentUrn, area = "" }, null)</dd>
                            <dt>Establishment:</dt>
                            <dd>@Html.ActionLink(Model.EstablishmentNames.Get(result), "Details", "Establishment", new { id = result.EstablishmentUrn, area = "" }, null)</dd>
                        }
                        else
                        {
                            <dt>UID:</dt>
                            <dd>@Html.ActionLink(result.GroupUID.ToString(), "Details", "Group", new { id = result.GroupUID, area = "" }, null)</dd>
                            <dt>Group:</dt>
                            <dd>@Html.ActionLink(Model.GroupNames.Get(result), "Details", "Group", new { id = result.GroupUID, area = "" }, null)</dd>
                        }

                        @*<dt>GID:</dt>
                        <dd>@result.Id</dd>
                        <dt>Date term of office ends/ended:</dt>
                        <dd>@(result.AppointmentEndDate?.ToString("dd/MM/yyyy") ?? "None recorded")</dd>

                        @if (result.AppointmentStartDate.HasValue)
                        {
                            <dt>Date of appointment:</dt>
                                <dd>@result.AppointmentStartDate.Value.ToString("dd/MM/yyyy")</dd>
                        }
                        @if (result.AppointingBodyId.HasValue)
                        {
                            <dt>Appointing body:</dt>
                                <dd>@(Model.AppointingBodies.FirstOrDefault(x => x.Id == result.AppointingBodyId)?.Name)</dd>
                        }*@

                    </dl>
                </li>
            }
        </ul>
    </div>

    if (Model.PageCount > 1)
    {
        <div class="column-two-thirds lower-pagination">
            @Html.Partial("_GenericPagination")
        </div>
    }
}
else
{
    <div class="column-two-thirds">
        <p class="no-school-results">
            Please check the search criteria or try @Html.ActionLink("searching again", "Index", "Search", new { area = "" }, null) using alternative combination of criteria fields.
        </p>
    </div>
}
