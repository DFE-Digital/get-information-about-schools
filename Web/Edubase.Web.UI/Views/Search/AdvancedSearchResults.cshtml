@using Edubase.Web.UI.Models
@using Edubase.Web.UI.Helpers
@model AdvancedSearchViewModel
@{
    ViewBag.Title = string.Format("Search results for '{0}'", Model.TextSearchModel.Text);
    ViewBag.PageClass = "search-results";
    ViewBag.HideLogo = true;
}

<div class="grid-row">
    <div class="column-two-thirds">
        @Html.ActionLink("Go back", "Advanced", null, new { @class = "home-link" })

        <h1 class="heading-xlarge">Search results</h1>
        @if (Model.SearchType == AdvancedSearchViewModel.eSearchType.Text)
        {
            if (Model.TextSearchType == AdvancedSearchViewModel.eTextSearchType.EstablishmentName || Model.TextSearchType == AdvancedSearchViewModel.eTextSearchType.Unknown)
            {
                <p>We found <span class="heading-xlarge">@Model.Count</span> schools or colleges for the search term "@Model.TextSearchModel.Text".</p>
            }
            else if (Model.TextSearchType == AdvancedSearchViewModel.eTextSearchType.LAESTAB)
            {
                <p>We found <span class="heading-xlarge">@Model.Count</span> schools or colleges with the LAESTAB "@Model.TextSearchModel.Text".</p>
            }
            else if (Model.TextSearchType == AdvancedSearchViewModel.eTextSearchType.UKPRN)
            {
                <p>We found <span class="heading-xlarge">@Model.Count</span> schools or colleges with the UKPRN "@Model.TextSearchModel.Text".</p>
            }
            else if (Model.TextSearchType == AdvancedSearchViewModel.eTextSearchType.URN)
            {
                <p>We found <span class="heading-xlarge">@Model.Count</span> schools or colleges with the URN "@Model.TextSearchModel.Text".</p>
            }
        }
        else if (Model.SearchType == AdvancedSearchViewModel.eSearchType.LocalAuthority)
        {
            <p>We found <span class="heading-xlarge">@Model.Count</span> schools or colleges in Local Authority "@Model.LocalAuthoritySearchModel.Text".</p>
        }


    </div>
</div>

<div class="grid-row">
    @if (Model.Error != null)
    {
        <div class="column-two-thirds">
            <h2 class="heading-medium">Error</h2>

            <p>@Model.Error</p>
        </div>
    }
    else if (Model.Results.Count > 0)
    {
        if (Model.PageCount > 1)
        {
            <div class="column-two-thirds top-pagination">
                @Html.Partial("_ResultsPaginationAdvSearch")
            </div>
        }
        <div class="column-two-thirds">
            <ul class="school-results-listing">
                @foreach (var result in Model.Results)
                {
                    <li>
                        <h2>@Html.ActionLink(result.Name, "Details", "Schools", new { id = result.Urn }, new { @class = "bold-small" })</h2>
                        <dl>
                            <dt>Address:</dt>
                            <dd>@SchoolDetailsHelpers.GetAddress(result)</dd>
                            <dt>URN:</dt>
                            <dd> @result.Urn</dd>
                            <dt>LAESTAB:</dt>
                            <dd>@result.LAESTAB</dd>
                            <dt>Status:</dt>
                            <dd>@result.Status</dd>
                        </dl>
                    </li>
                }
            </ul>
        </div>

        if (Model.PageCount > 1)
        {
            <div class="column-two-thirds lower-pagination">
                @Html.Partial("_ResultsPaginationAdvSearch")
            </div>
        }
    }
    else
    {
        <div class="column-two-thirds">
            <p class="no-school-results">Please try @Html.ActionLink("searching again", "Index") using different spelling or words.</p>
        </div>
    }

</div>