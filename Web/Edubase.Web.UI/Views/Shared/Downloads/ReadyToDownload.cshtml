@using Edubase.Services.Enums
@using Microsoft.Ajax.Utilities
@model IDownloadGenerationProgressModel
@{
    ViewBag.bodyClasses = "schools-search-page search-page";
    ViewBag.hideLogo = true;
}

<div class="breadcrumbs">
    @if (Model.SearchQueryString.IsNullOrWhiteSpace() || Model.SearchSource == null)
    {
        @Html.ActionLink("Home", "Index", "Search", new { area = "" })
    }
    else
    {
        if (Model.SearchSource == eLookupSearchSource.Governors)
        {
            <a href=@($"{Url.Action("Index", "GovernorSearch", new {area = "Governors"})}?{Model.SearchQueryString}")>Back to search results</a>
        }
        else if (Model.SearchSource == eLookupSearchSource.Establishments)
        {
            <a href=@($"{Url.Action("Index", "EstablishmentsSearch", new {area = "Establishments"})}?{Model.SearchQueryString}")> Back to search results</a>
        }
        else if (Model.SearchSource == eLookupSearchSource.Groups)
        {
            <a href=@($"{Url.Action("Index", "GroupSearch", new {area = "Groups"})}?{Model.SearchQueryString}")> Back to search results</a>
        }
    }
</div>

<div class="grid-row">
    <div class="column-full">
        <h1 class="heading-xlarge">Download data</h1>
    </div>
    <div class="horizontal-tabs-wrapper">        
        <div class="column-two-thirds">

            <h2 class="bold-medium">Download @Model.DownloadName search results</h2>
            @if (Model.TotalSteps.HasValue)
            {
                <p>@Model.Step of @Model.TotalSteps</p>
            }
            else
            {
                <br />
            }
            <p class="font-small">Your requested file is ready to download.</p>

            <ul>
                <li class="download-list-item">
                    <span class="icon-link-copy">
                        <a href="@Model.Progress.FileLocationUri" target="_blank" rel="nofollow">Data in @(Model.FileFormat.ToString()) format</a>
                        (will download as a ZIP file: open the ZIP to access its content)
                    </span>

                </li>
            </ul>
        </div>
    </div>
</div>

