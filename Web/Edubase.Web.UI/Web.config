<?xml version="1.0" encoding="utf-8"?>

<!--
  Do not edit connection string / app settings in this file directly.
  ===================================================================
  Instead, to specify custom values for configuration options / connection strings:
  - On Azure: specify application configuration options
  - Locally:  update your local config file / secrets
-->
<configuration>
  <configSections>
    <!--
      For more information on how to configure Glimpse, please visit http://getglimpse.com/Help/Configuration
      or access {your site}/Glimpse.axd for even more details and a Configuration Tool to support you.
    -->
    <section name="glimpse" type="Glimpse.Core.Configuration.Section, Glimpse.Core"/>

    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework"
             type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
             requirePermission="false"/>

    <section name="httpAuthModule" type="System.Configuration.NameValueFileSectionHandler"/>
  </configSections>

  <connectionStrings>
    <!--
      Connection string to the GIAS website's Azure Storage account
      - Table storage
      - Blob storage

      Note that the API typically uses a different Azure Storage account
      to serve e.g., pre-generated extracts/downloads.
    -->
    <add name="DataConnectionString" connectionString=""/>

    <!--
      The GIAS website makes (limited) use of Redis caches to minimise the number of API requests made.
      This is in combination with a variety of in-memory caches.

      GIAS's caching strategy is for review, and this may be removed at a later date.
    -->
    <add name="Redis" connectionString=""/>
  </connectionStrings>
  <appSettings>

    <!-- ==== SERVER / WEBSITE CONFIGURATION ==== -->
    <!--
      The 'Environment` setting is used as a descriptor for the environment in which the application is running.
      - When running locally, this value should be set to 'localdev' (some local-specific options rely on this).
    -->
    <add key="Environment" value="localdev"/>

    <!--
      TBC, Potentially unused, replaced by filter and `EnableFriendlyErrorPage`(?)
      See also: Edubase.Web.UI.MvcApplication.Application_Error
    -->
    <add key="EnableErrorReporting" value="true"/>

    <!--
      A "friendly" error page is one which hides the technical detail / stack trace.

      By default this is `true` as stack traces and other technical detail are not appropriate
      to include within user-facing errors, however overriding this within local/dev environments
      for debugging/testing purposes is likely desirable.

      See also: Edubase.Web.UI.Filters.ExceptionHandler.OnException
    -->
    <add key="EnableFriendlyErrorPage" value="true"/>

    <!--
      Razor engine version (e.g., MVC3 users Razor v3)

      See also: https://devblogs.microsoft.com/dotnet/how-does-vs-determine-which-version-of-razor-engine-to-use-when-editing-razor-webpage-files.aspx
    -->
    <add key="webpages:Version" value="3.0.0.0"/>

    <!--
      Setting `webpages:Enabled` to `false` prevents direct access of e.g., `.cshtml` files
    -->
    <add key="webpages:Enabled" value="false"/>

    <!--
      Where GIAS is accessed via a proxy (e.g., Azure Front Door), the header `X-Forwarded-Host`
      may be used to determine the user-facing hostname (e.g., as displayed in the browser).

      - This value may be set/overridden manually by users, therefore must not be trusted.

      - If a direct request is received (i.e., no `X-Forwarded-Host` header), the
        value of `AllowedForwardedHostNames` is ignored/not used as there will be
        no forwarded header to validate.

      Values for `AllowedForwardedHostNames` may be:
      - A single host (e.g., `example.com`).
        - The value must be acceptable by `System.UriBuilder.Host` as a valid host name.
        - An empty (or trimmable-whitespace-only) value is treated as no value.
        - Where a `x-forwarded-host` header is supplied within the request, it must match this value.
      - A comma-separated list of permitted hosts.
        - As per the single value, but allows for e.g., the `www.` variant of a domain/sub-domain.
        - Empty (or trimmable-whitespace-only) values are removed from the collection of values.
        - Where a `x-forwarded-host` header is supplied within the request, it must match one of these values.
      - Not specified, or where all values are trimmable to be empty (e.g., ` ` or `  ,  ,,, `).
        - Empty values are removed from the list and whatever remains will be treated as either no value, .

      See also: Edubase.Web.UI.Helpers.UrlHelperExtensions.GetForwardedHeaderAwareUrl
    -->
    <!-- <add key="AllowedForwardedHostNames" value="example.com"/> -->
    <!-- <add key="AllowedForwardedHostNames" value="example.com,www.example.com"/> -->


    <!-- ==== GIAS WEBSITE DEBUGGING ==== -->
    <!--
      TBC - Used by Glimpse? (debugging tool)
    -->
    <add key="ApiTraceSessionRetentionCount" value="25"/>

    <!--
      Debugging utility to inspect routes available and routes potentially matching the current page

      This is disabled by default (`false`), though enabling it (`true`) locally for debug/test purposes may be desirable.

      See also: https://haacked.com/archive/2008/03/13/url-routing-debugger.aspx/
    -->
    <add key="RouteDebugger:Enabled" value="false"/>

    <!--
      API Logging records the HTTP requests and responses made to the API.
      If enabled, these logs are placed within Azure Table Storage.
      These logs are associated with
      - the `SaUserId` for logged in users, or
      - the cookie value of `ApiSessionId` for not-logged-in users

      WARNING: These logs are highly detailed and contain sensitive data
      (e.g., HTTP headers, including authorisation headers), therefore
      must not routinely be enabled in production.

      If this is enabled in production-like environment, access to the log data
      *must* be monitored, and the data must be removed as soon as reasonably practical.
    -->
    <add key="EnableApiLogging" value="false"/>


    <!-- ==== GIAS WEBSITE FUNCTIONALITY CONFIGURATION ==== -->
    <!--
      This is the maximum permitted age (in days) of a data quality check,
      before users will be prompted again.
    -->
    <add key="DataQualityUpdatePeriod" value="7"/>

    <!--
      Sitemaps are accessed by e.g., search engine bots to index the website.
      - `SitemapCacheDays`      The maximum age of a generated and cached (in-memory) sitemap file (days)
      - `SitemapExcludeApi`     Misleadingly named - API routes (used by JavaScript) will be
                                - excluded from the sitemap where this value is set to value `0` (a normally falsey value), and
                                - included in the sitemap when value is set to `1` (or any other non-zero int, a normally truthy value)

      See also: Edubase.Web.UI.Controllers.SitemapController.ExcludeApiLookup
    -->
    <add key="SitemapCacheDays" value="21"/>
    <add key="SitemapExcludeApi" value="0"/>


    <!-- ====  ==== -->
    <add key="Content-Security-Policy"
         value="base-uri 'self'; object-src 'none'; default-src 'self'; frame-ancestors 'none'; connect-src 'self' https://*.google-analytics.com https://*.analytics.google.com https://www.find-school-performance-data.service.gov.uk/; frame-src https://www.googletagmanager.com; img-src 'self' data: https://*.google-analytics.com https://*.analytics.google.com https://atlas.microsoft.com; style-src 'self' 'unsafe-inline'; font-src 'self' data:; script-src 'self' 'nonce-inject' 'unsafe-eval' https://www.googletagmanager.com https://*.google-analytics.com https://*.analytics.google.com https://code.jquery.com http://d3js.org;"/>


    <!-- ==== JAVASCRIPT API KEYS ==== -->
    <!--
      API Keys
      - `GoogleApiKeyClientSide`    Analytics of access to the GIAS website (details TBC)
      - `GoogleTagManagerKey`       Analytics of access to the GIAS website (details TBC)
      - `AzureMapsApiKey`           Maps are displayed on the search results and some establishment detail pages
      - `OSPlacesApiKey`            Auto-complete functionality on Azure Maps (TBC)
    -->
    <add key="GoogleApiKeyClientSide" value=""/>
    <add key="GoogleTagManagerKey" value=""/>
    <add key="AzureMapsApiKey" value=""/>
    <add key="OSPlacesApiKey" value=""/>

    <!-- TBC -->
    <add key="ClientValidationEnabled" value="false"/>
    <!-- TBC -->
    <add key="UnobtrusiveJavaScriptEnabled" value="false"/>


    <!-- ==== GIAS API DEPENDENCIES ==== -->
    <!--
      Data presented via the GIAS website and changes made by GIAS website users is normally
      provided by the backend API.
      Note: Do not supply username/password (or other secrets) directly here.
      Specify this via app config on Azure, or via dev secrets if running locally.
    -->
    <add key="TexunaApiBaseAddress" value=""/>
    <add key="api:Username" value="rest-api-user"/>
    <add key="api:Password" value=""/>

    <add key="LookupApiBaseAddress" value=""/>
    <add key="LookupApiUsername" value="rest-api-user"/>
    <add key="LookupApiPassword" value=""/>


    <!-- ==== 3RD PARTY API DEPENDENCIES ==== -->
    <!--
      Academies are registered businesses, and some information about those businesses are made visible within GIAS.
      Companies House supply those business/company details via the API.
    -->
    <add key="CompaniesHouseBaseUrl" value="https://beta.companieshouse.gov.uk/company/"/>
    <add key="CompaniesHouseApiKey" value=""/>

    <!--
      The Schools Financial Benchmarking (SFB) service provides data
      about education establishments and Academy Trusts.

      Where a SFB record exists for an establishment/academy trust, GIAS provides a link to that page.

      This configuration defines the website where the link points at, and for how long
      GIAS should cache the check to see if SFB contains data about that establishment.

      - `FinancialBenchmarkingURL`            URL linked to from the GIAS home page
      - `FinancialBenchmarkingApiURL`         Base URL linked to from establishment/MAT details pages
      - `FinancialBenchmarkingCacheHours`     GIAS only shows the establishment/MAT-specific link if GIAS has been able to
                                              confirm that the associated FSCPD page exists.
                                              This setting configures the maximum age of the check result.
      - `FinancialBenchmarkingUsername`       (Not normally supplied) Basic auth username to access the FSB service.
      - `FinancialBenchmarkingPassword`       (Not normally supplied) Basic auth username to access the FSB service.

      See also: https://schools-financial-benchmarking.service.gov.uk/
    -->
    <add key="FinancialBenchmarkingURL" value="https://schools-financial-benchmarking.service.gov.uk/" />
    <add key="FinancialBenchmarkingApiURL" value="https://api.schools-financial-benchmarking.service.gov.uk/" />
    <add key="FinancialBenchmarkingCacheHours" value="72" />
    <add key="FinancialBenchmarkingUsername" value="" />
    <add key="FinancialBenchmarkingPassword" value="" />

    <!--
      The Find School and College Performance Data (FSCPD) service provides data
      about education establishments and Multi-Academy Trusts (MATs).

      Where a FSCPD record exists for an establishment, GIAS provides a link to that page.
      This configuration defines the website where the link points at, and for how long
      GIAS should cache the check to see if FSCPD contains data about that establishment.

      See also: https://www.gov.uk/school-performance-tables
      See also: https://www.find-school-performance-data.service.gov.uk

      - `FscpdHomeUrl`      URL linked to from the GIAS home page
      - `FscpdURL`          Base URL linked to from establishment/MAT details pages
      - `FscpdServiceName`  Name of the service to use within links (set via configuration as this has changed several times)
      - `FscpdCacheHours`   GIAS only shows the establishment/MAT-specific link if GIAS has been able to
                            confirm that the associated FSCPD page exists.
                            This setting configures the maximum age of the check result.
      - `FscpdUsername`     (Not normally supplied) Basic auth username to access the FSCPD service.
      - `FscpdPassword`     (Not normally supplied) Basic auth username to access the FSCPD service.
    -->
    <add key="FscpdHomeUrl" value="https://www.gov.uk/school-performance-tables"/>
    <add key="FscpdURL" value="https://www.compare-school-performance.service.gov.uk/"/>
    <add key="FscpdServiceName" value="Compare school and college performance in England"/>
    <add key="FscpdCacheHours" value="72"/>
    <add key="FscpdUsername" value=""/>
    <add key="FscpdPassword" value=""/>


    <!-- ==== WEBSITE AUTHENTICATION / AUTHORISATION ==== -->
    <!--
      ACCESS TO THE SERVER THAT GIAS IS HOSTED UPON

      Non-Production and non-local instances of the Web UI should not be openly visible to the world.
      - `HttpAuthModule.AuthMode`      Value of `Basic` enables use of "Basic authorisation" username/password access
      - `HttpAuthModule.Credentials`   Value in format of `username:password` (with an Auth Mode of `Basic`)

      See also: the <httpAuthModule> section below, within the file `Web.config`.
  -->
    <add key="HttpAuthModuleEnabled" value="true"/>
    <add key="HttpAuthModule.AuthMode" value="Basic"/>
    <add key="HttpAuthModule.Realm" value="Edubase"/>
    <!-- <add key="HttpAuthModule.Credentials" value="" /> -->
    <add key="HttpAuthModule.IgnoreIPAddresses" value="127.0.0.1;::1"/>



    <!-- TIMEOUT SETTINGS -->

    <add key="FBService_Timeout" value="2" />
    <add key="HttpClient_Timeout" value="30" />
    <add key="LookupClient_Timeout" value="10" />
    <add key="FscpdClient_Timeout" value="2" />
    <add key="SfbClient_Timeout" value="2" />
    <add key="OSPlacesApiServices_RetryIntervals" value="1,2,2,4"/>
    <add key="AzureMapService_RetryIntervals" value="1,2,2,4"/>

    <!--
      ACCESS TO INTERACT WITH DATA HELD BY GIAS

      Logging in to the GIAS website and the API is via data/claims sourced from a SAML(?) provider.
      - Currently this is DfE Sign In (DSI), though a DSI Simulator
      - Previous incarnations of GIAS include "Secure Access" (SA), whose legacy initials are
        refrenced by some variable names e.g., "SA User ID" and `SA Simulator`

      Toggling between options is specified via `owin:appStartup` (configurations for each are below)
      - `SecureAccessConfiguration`   Use of DSI
      - `SASimulatorConfiguration`    Use of the DSI Simualator
    -->
    <add key="owin:appStartup" value="SASimulatorConfiguration"/>

    <!--
      SA/DSI configuration
      - `ApplicationIdpEntityId`          The Entity ID of the SAML(?) provider.
      - `ExternalAuthDefaultCallbackUrl`  The URL the Identity Provider (IDP) will redirect to after a successful login,
                                            where the token will be recieved and processed by the GIAS website.
      - `MetadataLocation`                The URL to the Identity Provider (IDP) metadata file.
      - `SessionExpireTimeSpan`           The duration (hh:MM:ss) for which the session cookie remains valid,
                                            - specifically the `Expires/Max-Age` field on the cookie.
                                            - See also: Edubase.Web.UI.StartupSecureAccess.ConfigureAuth
      - `PublicOrigin`                    The URL of the GIAS website, as seen by the Identity Provider (IDP).
                                          This may be required if the GIAS website is hosted behind a proxy/WAF.
                                          Omitting this setting will default to using the value provided by `request.ApplicationUrl`.
                                          See also #157607 and #171878.
    -->
    <add key="ApplicationIdpEntityId" value="https://stg.education.gov.uk/edubase"/>
    <add key="ExternalAuthDefaultCallbackUrl" value="http://localhost:51350/Account/ExternalLoginCallback"/>
    <add key="MetadataLocation" value="https://pp-gias.signin.education.gov.uk/saml/metadata"/>
    <add key="SessionExpireTimeSpan" value="00:59:00"/>
    <!-- <add key="PublicOrigin" value="" /> -->

    <!--
      SA/DSI Simulator configuration
      - `SASimulatorUri`   the base URL for the instance of the SA/DSI Simulator
      - `SASimulatorGuid`  the GUID for "your application's" simulator configuration (pre-configured users)

      Notes:
      - The simulator URL will be `{SASimulatorUri}{SASimulatorGuid}?{lots of SAML request bits}`
        - e.g., https://dfe-sign-in-simulator.azurewebsites.net/{GUID-123-abc}/?SAMLRequest=
      - It can be managed via the url `{SASimulatorUri}{SASimulatorGuid}/Manage`
        - e.g., https://dfe-sign-in-simulator.azurewebsites.net/{GUID-123-abc}/Manage
    -->
    <add key="SASimulatorUri" value="https://dfe-sign-in-simulator.azurewebsites.net/"/>
    <add key="SASimulatorGuid" value=""/>

    <!--
      NotificationBannerCacheExpirationInMinutes sets how long before the cache for notification banners expires
      The cache is used to reduce how often the table storage is hit
      As each request requires a load of the notifiaction banners
    -->
    <add key="NotificationBannerCacheExpirationInSeconds" value="300"/>

  </appSettings>

  <!--<system.net>
    <defaultProxy>
      <proxy bypassonlocal="False" usesystemdefault="True" proxyaddress="http://127.0.0.1:8888" />
    </defaultProxy>
  </system.net>-->
  <!--
  For a description of web.config changes see http://go.microsoft.com/fwlink/?LinkId=235367.

  The following attributes can be set on the <httpRuntime> tag.
    <system.Web>
      <httpRuntime targetFramework="4.7.2" />
    </system.Web>
-->
  <system.web>
    <compilation debug="true" targetFramework="4.8"/>
    <httpRuntime targetFramework="4.8" maxQueryStringLength="32000" maxUrlLength="32000" maxRequestLength="102400"
                 executionTimeout="2097151" enableVersionHeader="false"/>
    <customErrors mode="RemoteOnly" redirectMode="ResponseRewrite" defaultRedirect="~/500.aspx">
      <error statusCode="403" redirect="~/403.aspx"/>
      <error statusCode="404" redirect="~/404.aspx"/>
      <error statusCode="500" redirect="~/500.aspx"/>
    </customErrors>
    <!-- Glimpse: This can be commented in to add additional data to the Trace tab when using WebForms
    <trace writeToDiagnosticsTrace="true" enabled="true" pageOutput="false"/> -->
    <httpModules>
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet"/>
      <add name="TelemetryCorrelationHttpModule"
           type="Microsoft.AspNet.TelemetryCorrelation.TelemetryCorrelationHttpModule, Microsoft.AspNet.TelemetryCorrelation"/>
      <add name="ApplicationInsightsWebTracking"
           type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web"/>
    </httpModules>
    <httpHandlers>
      <add path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet"/>
    </httpHandlers>
    <httpCookies httpOnlyCookies="true" requireSSL="true"/>
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" culture="neutral" publicKeyToken="30ad4fe6b2a6aeed"/>
        <bindingRedirect oldVersion="0.0.0.0-13.0.0.0" newVersion="13.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Optimization" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="1.1.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="0.0.0.0-1.6.5135.21930" newVersion="1.6.5135.21930"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.2.2.0" newVersion="4.2.2.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.2.2.0" newVersion="4.2.2.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.Cookies" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.2.2.0" newVersion="4.2.2.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Data.Services.Client" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.6.3.0" newVersion="5.6.3.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Data.OData" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.8.5.0" newVersion="5.8.5.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Data.Edm" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.8.5.0" newVersion="5.8.5.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Spatial" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.8.5.0" newVersion="5.8.5.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Http" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.2.9.0" newVersion="5.2.9.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Net.Http.Formatting" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-5.2.9.0" newVersion="5.2.9.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.VisualStudio.Enterprise.AspNetHelper" publicKeyToken="b03f5f7f11d50a3a"
                          culture="neutral"/>
        <codeBase version="14.0.0.0"
                  href="file:///C:/Program%20Files%20(x86)/Microsoft%20Visual%20Studio%2014.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.AspNetHelper.DLL"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="MiniProfiler" publicKeyToken="b44f9351044011a3" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-3.2.0.157" newVersion="3.2.0.157"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Autofac" publicKeyToken="17863af14b0044da" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.4.0.0" newVersion="6.4.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.Storage" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-9.1.0.0" newVersion="9.1.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Azure.KeyVault.Core" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-3.0.5.0" newVersion="3.0.5.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.ValueTuple" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.OAuth" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.2.2.0" newVersion="4.2.2.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Memory" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.0.1.2" newVersion="4.0.1.2"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.IdentityModel.Tokens.Saml" publicKeyToken="31bf3856ad364e35"
                          culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.22.1.0" newVersion="6.22.1.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.IdentityModel.Tokens" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.22.1.0" newVersion="6.22.1.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.IdentityModel.Xml" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.22.1.0" newVersion="6.22.1.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.IdentityModel.Logging" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.22.1.0" newVersion="6.22.1.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Diagnostics.DiagnosticSource" publicKeyToken="cc7b13ffcd2ddd51"
                          culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a"
                          culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Antlr3.Runtime" publicKeyToken="eb42632606e9261f" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Numerics.Vectors" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.1.4.0" newVersion="4.1.4.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Buffers" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.0.3.0" newVersion="4.0.3.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Threading.Tasks.Extensions" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-4.2.0.1" newVersion="4.2.0.1"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.IO.Pipelines" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.3" newVersion="6.0.0.3"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="0.0.0.0-5.2.9.0" newVersion="5.2.9.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Web.Infrastructure" publicKeyToken="31bf3856ad364e35" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Threading.Channels" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Bcl.AsyncInterfaces" publicKeyToken="cc7b13ffcd2ddd51" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb"/>
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient"
                type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer"/>
    </providers>
  </entityFramework>
  <system.serviceModel>
    <extensions>
      <behaviorExtensions>
        <add name="connectionStatusBehavior"
             type="Microsoft.ServiceBus.Configuration.ConnectionStatusElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="transportClientEndpointBehavior"
             type="Microsoft.ServiceBus.Configuration.TransportClientEndpointBehaviorElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="serviceRegistrySettings"
             type="Microsoft.ServiceBus.Configuration.ServiceRegistrySettingsElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </behaviorExtensions>
      <bindingElementExtensions>
        <add name="netMessagingTransport"
             type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingTransportExtensionElement, Microsoft.ServiceBus,  Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="tcpRelayTransport"
             type="Microsoft.ServiceBus.Configuration.TcpRelayTransportElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="httpRelayTransport"
             type="Microsoft.ServiceBus.Configuration.HttpRelayTransportElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="httpsRelayTransport"
             type="Microsoft.ServiceBus.Configuration.HttpsRelayTransportElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="onewayRelayTransport"
             type="Microsoft.ServiceBus.Configuration.RelayedOnewayTransportElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </bindingElementExtensions>
      <bindingExtensions>
        <add name="basicHttpRelayBinding"
             type="Microsoft.ServiceBus.Configuration.BasicHttpRelayBindingCollectionElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="webHttpRelayBinding"
             type="Microsoft.ServiceBus.Configuration.WebHttpRelayBindingCollectionElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="ws2007HttpRelayBinding"
             type="Microsoft.ServiceBus.Configuration.WS2007HttpRelayBindingCollectionElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="netTcpRelayBinding"
             type="Microsoft.ServiceBus.Configuration.NetTcpRelayBindingCollectionElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="netOnewayRelayBinding"
             type="Microsoft.ServiceBus.Configuration.NetOnewayRelayBindingCollectionElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="netEventRelayBinding"
             type="Microsoft.ServiceBus.Configuration.NetEventRelayBindingCollectionElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="netMessagingBinding"
             type="Microsoft.ServiceBus.Messaging.Configuration.NetMessagingBindingCollectionElement, Microsoft.ServiceBus, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </bindingExtensions>
    </extensions>
  </system.serviceModel>
  <system.webServer>
    <handlers>
      <add name="SitemapXml" path="sitemap*.xml" verb="GET" type="System.Web.Handlers.TransferRequestHandler"
           preCondition="integratedMode,runtimeVersionv4.0"/>
      <add name="ServiceWSDLHandler" path="service.wsdl" verb="GET" type="System.Web.Handlers.TransferRequestHandler"
           preCondition="integratedMode,runtimeVersionv4.0"/>
      <add name="Glimpse" path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet"
           preCondition="integratedMode"/>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0"/>
      <remove name="OPTIONSVerbHandler"/>
      <remove name="TRACEVerbHandler"/>
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*"
           type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0"/>
    </handlers>
    <modules>
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" preCondition="integratedMode"/>
      <add type="HttpAuthModule.HttpAuthModule" name="HttpAuthModule"/>
      <remove name="TelemetryCorrelationHttpModule"/>
      <add name="TelemetryCorrelationHttpModule"
           type="Microsoft.AspNet.TelemetryCorrelation.TelemetryCorrelationHttpModule, Microsoft.AspNet.TelemetryCorrelation"
           preCondition="managedHandler"/>
      <remove name="ApplicationInsightsWebTracking"/>
      <add name="ApplicationInsightsWebTracking"
           type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web"
           preCondition="managedHandler"/>
    </modules>
    <security>
      <requestFiltering removeServerHeader="true">
        <requestLimits maxQueryString="32000" maxAllowedContentLength="104857600" maxUrl="32000"/>
        <fileExtensions>
          <add fileExtension=".woff2" allowed="true"/>
        </fileExtensions>
      </requestFiltering>
    </security>
    <rewrite>
      <rules/>
    </rewrite>
    <httpErrors errorMode="Custom">
      <remove statusCode="404"/>
      <error statusCode="404" path="404.html" responseMode="File"/>
      <remove statusCode="403"/>
      <error statusCode="403" path="403.html" responseMode="File"/>
      <remove statusCode="500"/>
      <error statusCode="500" path="500.html" responseMode="File"/>
    </httpErrors>
    <httpProtocol>
      <customHeaders>
        <remove name="X-Powered-By"/>
        <add name="Cache-Control" value="no-store"/>
        <add name="Pragma" value="no-cache"/>
        <add name="X-Frame-Options" value="DENY"/>
        <add name="X-XSS-Protection" value="0"/>
        <add name="X-Content-Type-Options" value="nosniff"/>
      </customHeaders>
    </httpProtocol>
    <staticContent>
      <remove fileExtension=".woff"/>
      <remove fileExtension=".woff2"/>
      <mimeMap fileExtension=".woff" mimeType="application/font-woff"/>
      <mimeMap fileExtension=".woff2" mimeType="application/font-woff2"/>
    </staticContent>
    <validation validateIntegratedModeConfiguration="false"/>
  </system.webServer>
  <glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
    <!--
          For more information on how to configure Glimpse, please visit http://getglimpse.com/Help/Configuration
          or access {your site}/Glimpse.axd for even more details and a Configuration Tool to support you.
      -->
  </glimpse>
  <httpAuthModule>
    <!-- If HttpAuthModule has problems, please contact me, https://github.com/nabehiro/HttpAuthModule -->
    <!--
  [required] Http Authentication Mode.
  - Basic: Basic authentication
  - Digest: Digest authentication
  - None: No authentication -->
    <add key="AuthMode" value="Digest"/>
    <!-- [optional] default is "SecureZone" -->
    <add key="Realm" value="SecureZone"/>

    <!--
      Caution - If these credentials are specified here but not explicitly overridden
      (e.g., higher up in this page or within local settings/secrets), then these
      defaults will be functional.
    -->
    <!-- [required if http auth on] user1:pass1;user2:pass2;... -->
    <!-- <add key="Credentials" value="hoge:hogepass;foo:foopass;" /> -->
    <!-- [optional] Digest Auth Nonce Valid Duration Minutes. default is 120 -->
    <add key="DigestNonceValidDuration" value="120"/>
    <!-- [required if digest auth on] Digest Auth Nonce Salt -->
    <add key="DigestNonceSalt" value="uht9987bbbSAX"/>
    <!--
      [optional] If set, specified IPs are only allowed: otherwize All IPs are allowed.
      value is joined IP Range Combination as following.
      - 10.23.0.0/24
      - 127.0.0.1 (equals to 127.0.0.1/32)
      - 2001:0db8:bd05:01d2:288a:1fc0:0001:0000/16
      - ::1 (equals to ::1/128)

      e.g) 127.0.0.1;182.249.0.0/16;182.248.112.128/26;::1 -->
    <!-- <add key="RestrictIPAddresses" value="127.0.0.1;::1"/> -->
    <!-- [optional] If set, specified pattern url requests are skipped by http auth and IP Restriction. -->
    <!-- <add key="IgnorePathRegex" value="^/Home/Ignore$|^/Ignore\.aspx$|^/Content/"/> -->
    <!--
      [optional] If set,specified IPs requests skip http auth Restriction.
      value format is same as 'RestrictIPAddresses'
    -->
    <!-- <add key="IgnoreIPAddresses" value="127.0.0.1;::1"/> -->
    <!-- [optional] If set, specified value of Request Header is regarded as Client IP. -->
    <!-- <add key="ClientIPHeaders" value="CF-CONNECTING-IP;True-Client-IP"/> -->
    <!-- [optional] If set, specified value of Server Variable is regarded as Client IP. -->
    <!-- <add key="ClientIPServerVariables" value="HTTP_X_FORWARDED_FOR"/> -->
  </httpAuthModule>
  <system.codedom>
    <compilers>
      <compiler extension=".cs" language="c#;cs;csharp" warningLevel="4"
                compilerOptions="/langversion:7.3 /nowarn:1659;1699;1701;612;618"
                type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=3.6.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <compiler extension=".vb" language="vb;vbs;visualbasic;vbscript" warningLevel="4"
                compilerOptions="/langversion:default /nowarn:41008,40000,40008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+"
                type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=3.6.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </compilers>
  </system.codedom>
</configuration>
